define(['jquery','enquire','accessibleMegaMenu'],function($,enquire){'use strict';$(function(){var switchState=function switchState(options){var self=this;var defaultOptions={switchRoot:$('html'),switchTrigger:$('.js-trigger'),switchState_active:false,switchState_class:'is-open',switchTrigger_active:'is-active',switchState_events:'click',onSwitchOpen:function(){return true;},onSwitchClose:function(){return true;}};self.config=$.extend({},defaultOptions,options);self.config.switchTrigger.addClass('js-no-close');};switchState.prototype={switchToClose:function switchToClose(options){this.config.switchRoot.removeClass(this.config.switchState_class);this.config.switchTrigger.removeClass(this.config.switchTrigger_active);this.config.switchState_active=false;this.config.onSwitchClose.call(this,this.config.switchRoot,this.config.switchTrigger);},switchToOpen:function switchToOpen(options){if(this.config.switchState_active){return;}
this.config.switchRoot.addClass(this.config.switchState_class);this.config.switchTrigger.addClass(this.config.switchTrigger_active);this.config.switchState_active=true;this.config.onSwitchOpen.call(this,this.config.switchRoot,this.config.switchTrigger);},switchToToggle:function switchToToggle(options){if(this.config.switchState_active&&this.config.switchRoot.hasClass(this.config.switchState_class)){this.switchToClose();}else{this.switchToOpen();}},toSwitch:function toSwitch(options){var self=this;self.config.switchTrigger.on("click",function(e){e.preventDefault();self.switchToToggle();});$(document).on(self.config.switchState_events,function(e){var el=$(e.target);if(self.config.switchState_active&&!el.hasClass('js-no-close')&&!el.parents().hasClass('js-no-close')){e.preventDefault();self.switchToClose();}});},switchToDestroy:function switchToDestroy(options){this.config.switchTrigger.off("click");this.switchToClose();}};$(".js-navigation").accessibleMegaMenu({uuidPrefix:"a11y-megamenu",menuClass:"navigation-menu",topNavItemClass:"navigation-menu-parent",panelClass:"navigation-menu-submenu",hoverClass:"is-hover",focusClass:"is-focus",openClass:"is-open"});var mobileNav;enquire.register("screen and (max-width:767px)",{match:function(){$('.level1.parent > a').on('click',function(e){e.preventDefault();var $this=$(this);$this.toggleClass('is-open');$this.next('.submenu').toggleClass('is-open');});mobileNav=new switchState({switchTrigger:$('.js-toggle-nav'),switchState_class:'js-nav-open',onSwitchOpen:function(){this.config.switchRoot.addClass('nav-before-open');setTimeout(function(){$('html').addClass('nav-open');},42);$('.js-navigation a:first').focus();$('.js-navigation').addClass('js-no-close');if($('.js-navigation').find('.current').length>0){$('.js-navigation').find('.current').trigger('click');$('.js-navigation').find('.current').parents('li.parent').first().find('ul.submenu').not('ul.level1').trigger('click');if($('.level2').find('.current').length>0){$('.level2').find('.current').parents('li.parent').first().find('a').trigger('click');if($('.level1').find('.current').length>0){$('.level2').find('.current').parent().parents('li.parent').first().find('a').trigger('click');}}}},onSwitchClose:function(){this.config.switchRoot.removeClass('nav-open');setTimeout(function(){$('html').removeClass('nav-before-open');},300);this.config.switchTrigger.focus();$('.js-navigation').removeClass('js-no-close');}});mobileNav.toSwitch();},unmatch:function(){$('.level1.parent > a').off('click');mobileNav.switchToDestroy();}});$('.navigation').find('a').each(function(index,link){if($(link).attr('href')==document.location.href){$(link).addClass('current');if($(link).parent().hasClass('level1')){$(link).parent().addClass('current');$(link).parent().parents('li.level0').first().find('> a').addClass('current');}
if($(link).parent().hasClass('level2')){$(link).parent().addClass('current');$(link).parent().parents('li.level0').first().find('> a').addClass('current');$(link).parent().parents('li.level1').first().find('> a').addClass('current');}}});});});